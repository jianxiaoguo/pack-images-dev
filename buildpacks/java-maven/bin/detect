#!/usr/bin/env bash
set -eo pipefail

# 1. CHECK IF APPLICABLE 
if [[ ! -f pom.xml ]]; then
    exit 100
fi

# 2. GET ARGS
plan_path=$2

# 3. GET CONFIGURATION
version=1.8.0_222
if [[ -f .jdk-version ]]; then
    version=$(< .jdk-version tr -d '[:space:]')
fi

# 4. DECLARE DEPENDENCIES
cat >> "${plan_path}" <<EOL

[[provides]]
name = "jdk"

[[requires]]
name = "jdk"
version = "${version}"
EOL
